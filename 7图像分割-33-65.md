模板的图像是两两不相交的, 那么64个模板就会充满整个格 子。这些等价的类又可进一步分为最大连接的子集（连接分 量）。连接性可以用点 $(i, j)$ 的邻点来定义, 如4连通邻点、8连 通邻点等等。假如 $R$ 是属于格子的子集, 在 $R$ 中存在一个点序列, 第一个点是 $p_{1}$, 最后一个点是 $p_{2}$, 属于格子的子集 $R$ 的两个点 $p_{1}$ 和 $p_{2}$ 是被连接起来的, 这样, 相继的各点是 4 连接相邻的。通过 这样的连接关系可以定义一个属于 $R$ 的子集, 这个子集形成一个 区域, 在这个区域中, 任何点都与 $R$ 有关。利用等价模板可分成 最大的连接区域, 然后, 这些最大的连接区域又可以像搭积木 一样形成有意义的分割。 1970年布莱斯和芬尼玛提出一种分割方法, 如图5-6所示。图 ( $a$ ) 是具有灰度级的 $3 \times 3$ 的 $G$ 阵列, 图 (b) 是对 $G$ 的分割结果。 其中, 图像格子为 $G$, 它是大格子 $S$ 的子格子。 $G$ 为 $n \times m$ 的格子, $S$ 是 $(2 n+1) \times(2 m+1)$ 的大格子。在大格子中, $G(i, j)$ 点位 于 $S$ 的 $(2 i+1,2 j+1)$ 点上。 $G$ 中的点与 $S$ 中的点相对应, 其中每一下 标都是奇数, 其余的点用来代表区域的边界。以这种形式表现 的区域, 产生一种寻找最大连接区域的方法。G中的点与它上边 和右边的点相比较, 灰度级相同就合并, 灰度级不同就揷入边界 线。把图像中的每个点都处理过之后, 整个图像就被分割成区域。 在这个例子中, 由于采用了4连通等价关系, 因此, 由图可见, 在对角线方向上的等灰度级产生了隔开的区域。 $\begin{array}{lll}5 & 4\end{array}$

25

125

(a)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-03.jpg?height=954&width=1055&top_left_y=314&top_left_x=1137)

(b) 

\section{2 分裂合并法}

\section{实际中常先把图像分成任意大小且不重叠的区域，然后再}

合并或分裂这些区域以满足分割的要求, 即分裂合并法. 一致

性测度可以选择基于灰度统计特征 (如同质区域中的方差)，假

设阈值为 $T$, 则算法步骤为:

(1) 对于任一 $R_{i}$, 如果 $V\left(R_{i}\right)>T$ ，则将其分裂成互不重叠的四

等分;

(2) 对相邻区域 $R_{i}$ 和 $R_{j}$, 如果 $\boldsymbol{V}\left(\boldsymbol{R}_{i} \bigcup_{j} \boldsymbol{R}\right)<T$, 则将二者合并;

(3) 如果进一步的分裂或合并都不可能了, 则终止算法。 

\section{2 分裂合并法}

\begin{tabular}{|l|l|l|}
\hline$R_{1}$ & \multicolumn{2}{|l|}{$R_{2}$} \\
\hline$R_{3}$ & $R_{41}$ & $R_{42}$ \\
\cline { 2 - 3 } & $R_{43}$ & $R_{44}$ \\
\hline
\end{tabular}
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-05.jpg?height=412&width=800&top_left_y=376&top_left_x=1264)

\section{简单的区域分裂过程}
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-05.jpg?height=400&width=1914&top_left_y=1075&top_left_x=252)

\section{分裂合并法分割图像示例}



\section{2 边 缘 检 测}

当物体与背景有明显对比度时，物体的边界处于图象梯度最高的点上，通过 跟踪图象中具有最高梯度的点的方式获得物体的边界, 可以实现图象分割。

这种方法容易受到噪声的影响而偏离物体边界, 通常需要在跟踪前对梯度图 象进行平滑等处理，再采用边界搜索跟踪算法来实现。

在Marr的视觉计算理论框架中, 抽取二维图像上的边缘、 角点、纹理等基本 特征, 是整个系统框架中的第一步。这些特征所组成的图称为基元图。Yuille 等指出, 在不同 “尺度” 意义下的边缘点, 在一定条件下包含了原图像的全 部信息。图5-7画出了一幅图像中的边缘点, 仅仅根据这些边缘点, 就能识别 出三维物体，可见边缘点确实包含了图像中的大量信息。

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-06.jpg?height=61&width=131&top_left_y=1808&top_left_x=41)



![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-07.jpg?height=1062&width=1387&top_left_y=279&top_left_x=525)

图5-7 图像中的边缘点 (1) 空间曲面上的不连续点。如标为 $A$ 的边缘线, 这些边缘

线为两个不同曲面的或平面的交线, 该点处物体表面的法线方

向不连续, 在 $A$ 类边缘线的两边, 图像的灰度值有明显的不同。

\section{（2）B类边缘线。B类边缘线是由不同材料或相同材料不同}

颜色产生的。图中桌面由两种不同材料组成, 由于它们对光的

反射系数不同，使 $B$ 边缘线的两侧灰度有明显不同。 (3) $C$ 类边缘线。C类边缘线是物体与背景的分界线。如图中 圆柱上有两条 $C$ 类边缘线, 这类边缘线一般称为外轮廓线。在 $C$ 类边缘点上, 三维物体表面的法线方向是连续的, 出现边缘点是 由于从一定视角看物体时, $C$ 类边界点是物体与背景的交界处。 由于物体与背景在光照条件与材料反射系数等方面差异很大, 因此在 $C$ 类边缘两侧, 图像的灰度也有很大差异。图中标以 $C^{\prime}$ 的 边缘, 即是物体与背景的交界处, 也是物体上表面法线的不连 续处，但引起它两侧灰度跃变的原因是前者。

\section{（4）D边缘。D是阴影引起的边缘。由于物体表面某一部分}

被另一物体遮挡, 使它得不到光源的照射, 从而引起边缘点两侧 灰度值有较大的差异。 

\section{2 .1 边缘检测与微分运算}

如前所述, 边缘点是信号 “变化剧烈” 的地方, 但这么说并 不准确, 需要定义一个准确的边缘数学模型。以一维信号为例,

图 7-8（a）是一种阶跃信号, 我们当然认为 $A$ 点处为边缘点。在 实际情况中，物理信号不可能有理想的突变，而是如图 7-8（b） 所示的逐渐增大的信号, 对图 $7-8$ ( $b$ ) 中所示 $A 、 B 、 C$ 三点, 一般称 $B$ 点为边缘点。在图 $7-8(c)$ 和 $7-8(d)$ 中，如果台 阶比较窄, 即可以认为 $B$ 点为边缘点, 也可以认为该信号有两个 边缘点 $A$ 与 $C$ 。 

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-11.jpg?height=766&width=708&top_left_y=328&top_left_x=38)

(b)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-11.jpg?height=711&width=746&top_left_y=378&top_left_x=864)

(c)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-11.jpg?height=737&width=731&top_left_y=355&top_left_x=1672)

(d) 

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-12.jpg?height=510&width=637&top_left_y=233&top_left_x=230)

(a)
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-12.jpg?height=516&width=642&top_left_y=826&top_left_x=224)

(c)
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-12.jpg?height=500&width=1262&top_left_y=249&top_left_x=890)

(b)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-12.jpg?height=520&width=631&top_left_y=824&top_left_x=1518)

(d)

图 7-9 图像中不同类型的边界
（a）边界;
(b) 线;
（c）折线变化;
（d）缓慢的平滑变化 
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-13.jpg?height=976&width=1806&top_left_y=322&top_left_x=332)

图5-10

图 7 -10 用Prewitt算子进行边缘检测的结果 

\subsection{2 高斯-拉普拉斯(LOG)算子}

噪声点对边缘检测有较大的影响, 效果更好的边缘检测器是高 斯-拉普拉斯(LOG)算子。它把高斯平滑滤波器和拉普拉斯锐化滤波 器结合起来, 先平滑掉噪声, 再进行边缘检测, 所以效果更好。

常用的LOG算子是 $5 \times 5$ 的模板:

$$
\left[\begin{array}{ccccc}
-2 & -4 & -4 & -4 & -2 \\
-4 & 0 & 8 & 0 & -4 \\
-4 & 8 & 24^{*} & 8 & -4 \\
-4 & 0 & 8 & 0 & -4 \\
-2 & -4 & -4 & -4 & -2
\end{array}\right]
$$



![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-15.jpg?height=1008&width=1754&top_left_y=287&top_left_x=421)

图 $7-11 \mathrm{LOG}$ 算子中心点的距离与位置加权系数的关系 

\section{若将图 7 -11绕y轴作旋转一周后, LOG算子很像一顶墨西哥}

草帽，所以，LOG又叫墨西哥草帽滤波器。

在图像边缘检测中， 还有Wallis算子、过零点检测（Marr-

\section{Hildreth算子）、Canny边缘检测方法、SUSAN（Smallest}

\section{Univalue Segment Assimilating Nucleus）边缘检测等。}


![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-17.jpg?height=1006&width=1328&top_left_y=662&top_left_x=582)

\section{3 轮廓跟踪与提取}

\section{7 .3.1 轮廓跟踪}

\section{在识别图像中的目标时，往往需要对目标边缘作跟踪处理，}

也叫轮廓跟踪。顾名思义, 轮廓跟踪就是通过顺序找出边缘点来 跟踪边界的。若图像是二值图像或图像中不同区域具有不同的像 素值，但每个区域内的像素值是相同的，则如下算法可完成基于

\section{4连通或8连通区域的轮廓跟踪。}

步骤1：首先按从上到下, 从左到右的顺序扫描图像, 寻 找没有标记跟踪结束记号的第一个边界起始点 $\mathrm{A} 0, \mathrm{~A} 0$ 是具有最 小行和列值的边界点。定义一个扫描方向变量dir, 该变量用于 记录上一步中沿着前一个边界点到当前边界点的移动方向, 其 初始化取值为
(1) 对4连通区域取dir = 3, 如图 7 -12(a) 所示;
(2) 对8连通区域取dir = 7, 如图 7 -12(b)所示。 

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-20.jpg?height=731&width=768&top_left_y=336&top_left_x=171)

3

(a)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-20.jpg?height=794&width=771&top_left_y=330&top_left_x=1601)

(b) 步骤2：按逆时针方向搜索当前像素的 $3 \times 3$ 邻域, 其起始

搜索方向设定如下:

(1) 对4连通区域取(dir + 3)mod 4， 如图 7 -13(a)所示;

(2) 对8连通区域, 若dir为奇数取(dir + 7)mod 8, 如图 7 -

13(b)所示; 若dir为偶数取(dir + 6) $\bmod 8$, 如图 $7-13$ (c)所示。 

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-22.jpg?height=656&width=644&top_left_y=466&top_left_x=99)

(a)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-22.jpg?height=656&width=647&top_left_y=466&top_left_x=939)

(b)

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-22.jpg?height=660&width=647&top_left_y=461&top_left_x=1778)

(c)

图 7-13 3×3邻域起始搜索方向 在3×3邻域中搜索到的第一个与当前像素值相同的像素便 为新的边界点 $\mathrm{A}_{n}$, 同时更新变量dir为新的方向值。

步骤3: 如果 $A_{n}$ 等于第二个边界点 $A_{1}$ 且前一个边界点 $A_{n-1}$ 等于 第一个边界点 $A_{0}$, 则停止搜索, 结束跟踪, 否则重复步骤2继续 搜索。

步骤4: 由边界点 $A_{0} 、 A_{1} 、 A_{2} 、 \ldots 、 A_{n-2}$ 构成的边界便为要跟 踪的边界。

算法中步骤1中所采用的准则称为 “探测准则”，其作用是 找出第一个边界点；步骤3中所采用的准则称为 “跟踪准则”， 其作用是找出所有边界点。 
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-24.jpg?height=572&width=2100&top_left_y=410&top_left_x=244)

图 7-14 轮廓跟踪示例 

\subsection{2 轮廓提取}

二值图像轮廓提取的算法非常简单，就是掏空内部点: 如

果原图像中有一点为黑, 且它的8个邻点都是黑色时, 说明该点 是内部点, 将该点删除（置为白色像素值255）。对图像中所有 像素点执行该操作便可完成图像轮廓的提取。 

\subsection{Hough 变换}

对于图象中某些符合参数模型的主导特征, 如直 线、圆、椭圆等, 可以通过对其参数进行聚类的 方法，抽取相应的特征。

\section{Hough变换[Hough，1962]是一种基于图像全局} 分割结果的边缘连接技术, 它抗干扰能力强, 能 检测出任意形状的曲线, 即使线上有许多的断 裂, 因此在图像分析的预处理中获得广泛应用。 

\section{1 ) 抽取线条特征}

\section{直线在极坐标系下具有如下的参数方程形式:}

$$
\rho=x \cos \theta+y \sin \theta \quad(7.2)
$$

\section{这表明图像空间的一点（x,y）对应于 $(\rho, \theta)$ 空间 的一条正弦曲线，其相位和幅值由 $\mathbf{x} 、 \mathbf{y}$ 决定。}
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-27.jpg?height=546&width=1366&top_left_y=1002&top_left_x=525)

图 7-15 点的Hough变换的极坐标形式 

\section{$(x, y)$ 空间的同一条直线上的点在 $(\rho, \theta)$ 空间的}

正弦曲线都会相交于点 $\left(\rho_{0}, \theta_{0}\right), \rho_{0}$ 为这条直线 到原点的距离, $\theta_{0}$ 为直线的法线与轴的夹角.
![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-28.jpg?height=526&width=1468&top_left_y=745&top_left_x=630)

图 7-16 共线点Hough变换的极坐标形式 

\section{首先将参数空间 $(\rho, \theta)$ 量化为等间隔的小区域,}

然后针对超过给定阈值的所有边缘点, 对于每个

$(\boldsymbol{p}, \boldsymbol{\theta})$ 将其映射到的参数空间中的小区域中, 记

数落到每个小区域的点数。最后, 取具有最大频

度的若干小区域的参数作为线条特征的参数, 得

到图象中主导性的线条特征。

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-29.jpg?height=497&width=641&top_left_y=1142&top_left_x=1044)

소은 

![](https://cdn.mathpix.com/cropped/2023_03_28_6116f4e0e226f2060611g-30.jpg?height=188&width=364&top_left_y=142&top_left_x=816)

1) 将 $(\rho, \theta)$ 空间量化, 得到二维矩阵 $M(\rho, \theta)$, $M(\rho, \theta)$ 是一个累加器, 初始值为 $0, M(\rho, \theta)=0$ 。

2 ) 对边界上的每一个点 $\left(x_{i}, y_{i}\right)$, 将 $\theta$ 的所有量化 值代入式 ( 7-2), 计算相应的 $\rho$, 并且将累加器加1, $M(\rho, \theta)=M(\rho, \theta)+1$ 。

3) 将全部 $\left(x_{i}, y_{i}\right)$ 处理后, 分析 $M(\rho, \theta)$, 如果 $M(\rho, \theta) \geq T$, 就认为存在一条有意义的线段, 是该线段 的拟合参数。 $T$ 是一个非负整数, 由图像中景物的先 验知识决定。

4) 由 $(\rho, \theta)$ 和 $\left(x_{i}, y_{i}\right)$ 共同确定图像中的线段, 并将 断裂部分连接。 

\section{2 ）抽取圆特征$$
(x-a)^{2}+(y-b)^{2}=r^{2}
$$

1. 固定r, 首先将参数空间 $(\mathrm{a}, \mathrm{b})$ 量化为等间隔的小区域, 然后针对超过给定阈值的所有边缘点, 对于每个(a,b)将 其映射到的参数空间中的小区域中, 记数落到每个小区 域的点数。最后, 取具有最大频度的若干小区域的参数 作为圆特征的参数;

\section{2 . $r$ 取不同值, 重复第一步; 最大频度对应参数即为图象 中圆参数。}

소은 

\section{图像分割小结}

1、图像分割是将一幅数字图像划分为不交叠的、连 通的像素集的过程, 其中一个对应于背景, 其他的则 对应于图像中的各个物体。

2、图像分割可以通过为物体指定其像素或找出物体 之间的（或物体和背景之间的）边界的方法来实现。 3 、灰度级阈值处理是一种总能产生闭合的连通边界 的简单分割技术。

4 、在分割之前进行背景的平滑和噪声消除, 常常能 改善分割的性能。 5 、阈值的大小应当根据图像的内容变化，除非 背景灰度级和物体的对比度相对恒定。

6、具有简单物体以及与背景对比度明显的图像， 将阈值置于双峰直方图的低䏌可使物体面积对阈 值变化的敏感度最小。

7、物体分割可以通过在梯度图像中进行边界跟 踪或阈值处理来实现。

8 、对一幅图像的分割可以用隶属关系图、边界 链码、或线段编码来实现。