[TOC]

# 3.1 图像编码概述

## 3.1.1 图像编码基本原理

虽然表示图像需要大量的数据, 但图像数据是高度相关的, 或者说存在冗余 (Redundancy) 信息, 去掉这些冗余信息后可以有效压缩图像, 同时又不会损害图像的有效信息。数字图像的写余主要表现为以下几种形式: 空间几余、时间冗余、视觉杂、 信息熵咒余、结构冗余和知识冗余。

- 空间冗余：图像内部相邻像素之间存在较强的相关性所造成的咒余。

- 时间写余: 视频图像序列中的不同帧之间的相关性所造成的写余。

- 视觉冗余： 是指人眼不能感知或不敏感的那部分图像信息。

- 信息熵冗余： 也称编码冗余，如果图像中平均每个像素使用的比特数大于该图像的信息熵, 则图像中存在咒余, 这种冗余称为信息熵冗余。

- 结构冗余：是指图像中存在很强的纹理结构或自相似性。

- 知识冗余: 是指在有些图像中还包含与某些先验知识有关的信息。 

图像数据的这些冗余信息为图像压缩编码提供了依据。如, 利用人眼对蓝光不敏感的视觉特性, 在对彩色图像编码时, 就可以用较低的精度对蓝色分量进行编码。图像编码的目的就是充分利用图像中存在的各种呪余信息, 特别是空间几余、时间冗余以及视觉冗余, 以尽量少的比特数来表示图像。利用各种冗余信息, 压缩编码技术能够很好地解决在将模拟信号转换为数字信号后所产生的带宽需求增加的问题, 它是使数字信号走上实用化的关键技术之一, 表3-1中列出了几种常见应用的码率。 
$$
\begin{array}{|c|c|c|c|c|c|c|c|}
\hline \text { 应用场合 } & \text { 比特/像素 } & \text { 像索数/行 } & \text { 行数/帧 } & \text { 帧数/秒 } & \text { 亮色比 } & \text { 比特/秒(压缩前) } & \text { 比特/秒(压缩后) } \\
\hline \text { 高清晰电视 } & 8 & 1920 & 1080 & 30 & 4: 1: 1 & 1.18 ~Gb / s & 20 \sim 25 Mb / s \\
\hline \text { 普通电视 } & 8 & 720 & 480 & 30 & 4: 1: 1 & 167 Mb / s & 4 \sim 8 Mb / s \\
\hline \text { 会议电视 } & 8 & 352 & 288 & 30 & 4: 1: 1 & 36.5 Mb / s & 1.5 \sim 2 Mb / s \\
\hline \text { 桌上电视 } & 8 & 176 & 144 & 30 & 4: 1: 1 & 9.1 Mb / s & 128 ~Kb / s \\
\hline \text { 电视电话 } & 8 & 128 & 112 & 30 & 4: 1: 1 & 5.2 Mb / s & 56 ~Kb / s \\
\hline
\end{array}
$$
表3-1 几种常见应用的码率

## 3.1.2 图像编码的方法

根据编码过程中是否存在信息损耗可将图像编码分为有损压缩和无损压缩。

- 无损压缩: 无信息损失, 解压缩时能够从压缩数据精确地恢复原始图像;

- 有损压缩：不能精确重建原始图像, 存在一定程度的失真。 

图像冗余有损压缩的原理
$$
\begin{array}{|l|l|l|l|l|}
\hline 36 & 35 & 34 & 34 & 34 \\
\hline 34 & 34 & 32 & 34 & 34 \\
\hline 33 & 37 & 30 & 34 & 34 \\
\hline 34 & 34 & 34 & 34 & 34 \\
\hline 34 & 35 & 34 & 34 & 31 \\
\hline
\end{array}
\Rightarrow
\begin{array}{|l|l|l|l|l|}
\hline 34 & 34 & 34 & 34 & 34 \\
\hline 34 & 34 & 34 & 34 & 34 \\
\hline 34 & 34 & 34 & 34 & 34 \\
\hline 34 & 34 & 34 & 34 & 34 \\
\hline 34 & 34 & 34 & 34 & 34 \\
\hline
\end{array}
\Rightarrow
\begin{array}{|l|l|}
\hline 25 &34\\
\hline
\end{array}
$$
图像冗余无损压缩的原理
$$
\begin{array}{|l|l|l|l|}
\hline\quad & \quad&\quad &\quad\\
\hline & & &\\
\hline & & &\\
\hline & & &\\
\hline
\end{array}
\Rightarrow
\begin{array}{|l|l|l|l|}
\hline \text { RGB } & \text { RGB } & \text { RGB } & \text { RGB } \\
\hline \text { RGB } & \text { RGB } & \text { RGB } & \text { RGB } \\
\hline \text { RGB } & \text { RGB } & \text { RGB } & \text { RGB } \\
\hline \text { RGB } & \text { RGB } & \text { RGB } & \text { RGB } \\
\hline
\end{array}
\Rightarrow
\begin{array}{|c|c|}
\hline 16 & RGB \\
\hline
\end{array}
$$


- 第一代压缩编码

八十年代以前, 主要是根据传统的信源编码方法。

<img src="C:/Users/16955/AppData/Roaming/Typora/typora-user-images/image-20230423141843511.png" alt="image-20230423141843511" style="zoom:50%;" />

- 第二代压缩编码

八十年代以后, 突破信源编码理论, 结合分形、 模型基、神经网络、小波变换等数学工具, 充分利用视觉系统生理心理特性和图像信源的各种特性。 

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20230423141910572.png" alt="image-20230423141910572" style="zoom:50%;" />

根据编码原理可以将图像编码分为熵编码、预测编码、变换编码和混合编码等。

图像压缩编码系统原理框图

![image-20230423141939605](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20230423141939605.png)

(1) 熵编码。熵编码是纯粹基于信号统计特性的编码技术, 是一种无损编码。熵编码的基本原理是给出现概率较大的符号赋予一个短码字, 而给出现概率较小的符号赋予一个长码字, 从而使得最终的平均码长很小。 常见的熵编码方法有行程编码 (Run Length Encoding)、哈夫曼编码和算术编码。 

(2)预测编码。预测编码是基于图像数据的空间或时间冗余特性, 用相邻的已知像素(或像素块)来预测当前像素(或像素块)的取值, 然后再对预测误差进行量化和编码。预测编码可分为帧内预测和帧间预测, 常用的预测编码有差分脉码调制(Differential Pulse Code Modulation，DPCM)和运动补偿法。

(3)变换编码。变换编码通常是将空间域上的图像经过正交变换映射到另一变换域上, 使变换后的系数之间的相关性降低。 图像变换本身并不能压缩数据, 但变换后图像的大部分能量只集中到少数几个变换系数上, 采用适当的量化和熵编码就可以有效地压缩图像。

 (4) 混合编码。混合编码是指综合了熵编码、变换编码或预测编码的编码方法, 如JPEG标准和MPEG标准。

根据对压缩编码后的图像进行重建的准确程度, 可将常用的图像编码方法分为三类:

(1)信息保持编码: 也称无失真编码, 它要求在编解码过程中保证图像信息不丢失, 从而可以完整地重建图像。信息保持编码的压缩比较低, 一般不超过3: 1, 主要应用在图像的数字存储方面, 常用于医学图像编码中。 

(2)保真度编码: 主要利用人眼的视觉特性, 在允许的失真 (Lossy) 条件下或一定的保真度准则下, 最大限度地压缩图像。保真度编码可以实现较大的压缩比, 主要用于数字电视技术、静止图像通信、娱乐等方面。对于这些图像，过高的空间分辨率和过多的灰度层次, 不仅增加了数据量, 而且人眼也接收不到。因此在编码过程中, 可以丢掉一些人眼不敏感的信息, 在保证一定的视觉效果条件下提高压缩比。 

(3) 特征提取: 在图像识别、分析和分类等技术中, 往往并不需要全部图像信息, 而只要对感兴趣的部分特征信息进行编码即可压缩数据。例如, 对遥感图像进行农作物分类时,就只需对用于区别农作物与非农作物, 以及农作物类别之间的特征进行编码, 而可以忽略道路、河流、建筑物等其他背景信息。 

## 3.1.3 图像编码新技术

图像编码已经发展了几十年, 人们不断提出新的压缩方法。如, 利用人工神经网络 (Artificial Neural Network, ANN) 的压缩编码、分形编码(Fractal Coding)、小波编码(Wavelet Coding)、基于对象的压缩编码(Object Based Coding)和基于模型的压缩编码(Model Based Coding)等等。 

1)分形编码

分形编码是在波兰美籍数学家B.B.Mandelbrot建立的分形几何理论的基础上发展起来的一种编码方法。分形编码最大限度地利用了图像在空间域上的自相似性(即局部与整体之间存在某种相似性)，通过消除图像的几何几穴余来压缩数据。 M.Barnsley将迭代函数系统 (Iterate Function System，IFS) 用于描述图像的自相似性, 并将其用于图像编码, 对某些特定图像获得了10 000: 1的压缩比。分形编码过程十分复杂, 而解码过程却很简单, 故通常用于对图像编码一次, 而需译码多次的信息传播应用中。 

2)小波编码

1989年， S.G.Mallat首次将小波变换用于图像编码。经过小波变换后的图像, 具有良好的空间方向选择性, 而且是多分辨率的, 能够保持原图像在各种分辨率下的精细结构, 与人的视觉特性十分吻合。

3)模型编码

模型编码是近几年发展起来的一种很有前途的低比特率编码方法, 其基本出发点是在编、解码两端分别建立起相同的模型，编码时利用先验模型抽取图像中的主要信息并用模型参数的形式表示，解码时则利用所接收的模型参数重建图像。 

## 4.1.4 图像编码评价

随着众多图像压缩算法的出现, 如何评价图像压缩算法就成为重要的课题。一般说来, 评价图像压缩算法的优劣主要有以下4个参数。

1)算法的编码效率

算法的编码效率通常有几种表现形式: 平均码字长度(R)， 图像的压缩比 (rate, $r$ ), 每秒钟所需的传输比特数 (bits per second, bps), 图像熵与平均码长之比 $(\eta)$, 这些表现形式很容易相互转换。下面给出与图像编码效率有关的几个定义。 设一幅灰度级为 $N$ 的图像, 图像中第 $k$ 级灰度出现的概率为 $P_{k}$,

图像大小为 $N_{x} \times N_{y}$, 每个像素用 $d$ 比特表示, 每两帧图像间隔 $\Delta t$, 则按信息论中信息熵的定义, 数字图像的熵 $H$ 由下式定义:

$$
H=-\sum_{k=1}^{N} P_{k} 1 b P_{k}\tag{3-1}
$$

由此可见, 图像熵 $H$ 表示各灰度级比特数的统计平均值。

对于一种图像编码方法, 设第 $k$ 级灰度的码字长度为 $B_{k}$, 则该图像的平均码字长度 $R$ 为

$$
R=\sum_{k=1}^{N} B_{k} P_{k}\tag{3-2}
$$

于是，可定义编码效率 $\eta$ 为

$$
\eta=\frac{H}{R} \times 100 \%\tag{3-3}
$$

每秒钟所需的传输比特数bps为

$$
b p s=\frac{N_{x} N_{y} R}{\Delta t}\tag{3-4}
$$

压缩比 $r$ 为
$$
r=\frac{d}{R}\tag{3-5}
$$
由于同一压缩算法对不同图像的编码效率会有所不同, 因此常需定义一些 “标准图像”，如国际上流行的三幅图像Lena、Barbara和Mandrill。一般通过测量不同压缩算法对同一组 “标准图像”的编码性能来评价各图像压缩算法的编码效率。 

2)编码图像的质量

图像质量评价可分为客观质量评价和主观质量评价。最常用

的客观质量评价指标是均方误差 (MSE) 和峰值信噪比

(PSNR)，其定义如下：

$$
M S E=\frac{1}{N_{x} N_{y}} \sum_{i=0}^{N_{x}} \sum_{j=0}^{N_{y}}[f(i, j)-\hat{f}(i, j)]^{2} \tag{3-6}
$$

$$
 P S N R=10 \lg \left(\frac{255 \times 255}{M S E}\right)\tag{3-7}
$$

主观质量评价是指由一批观察者对编码图像进行观察并打分, 然后综合所有人的评判结果, 给出图像的质量评价。客观质量评价能够快速有效地评价编码图像的质量, 但符合客观质量评价指标的图像不一定具有较好的主观质量。主观质量评价能够与人的视觉效果相匹配, 但其评判过程缓慢费时。 

3)算法的适用范围

特定的图像编码算法具有其相应的适用范围, 并不对所有图像都有效。一般说来, 大多数基于图像信息统计特性的压缩算法具有较广的适用范围, 而一些特定的编码算法的适用范围较窄, 如分形编码主要用于自相似性高的图像。 

4)算法的复杂度

算法的复杂度即指完成图像压缩和解压缩所需的运算量和硬件实现该算法的难易程度。优秀的压缩算法要求有较高的压缩比, 压缩和解压缩快, 算法简单, 易于硬件实现, 还要求解压缩后的图像质量较好。选用编码方法时一定要考虑图像信源本身的统计特性、多媒体系统(硬件和软件产品)的适应能力、应用环境以及技术标准。