# 3.3 香农-范诺编码

香农-范诺 (Shannon-Fannon) 编码也是一种常见的可变字长 编码。与哈夫曼编码相似, 当信源符号出现的概率正好为 $2^{-i}$ $(i<0)$ 时, 采用香农-范诺编码同样能够达到 $100 \%$ 的编码效率。 香农-范诺编码的理论基础是符号的码字长度 $N_i$ 完全由该符号出 现的概率来决定, 即
$$
-\log _D P_i \leq N_i \leq-\log _D P_i+1
$$
式中，D为编码所用的数制。 

香农-范诺编码的步骤如下：
（1）将信源符号按其出现概率从大到小排序;
（2）按照式 (3-9) 计算出各概率对应的码字长度 $N_i$;
（3）计算累加概率 $A_i$, 即
$$
A_i=A_{i-1}+P_{i-1} \quad i=1,2, \ldots, N-1 ; \quad A_0=0
$$
(4) 把各个累加概率 $A_i$ 由十进制转化为二进制, 取该二进 制数的前 $N_i$ 位作为对应信源符号的码字。

为便于比较, 仍以例4-1中图像为对象, 对其进行香农-范诺 编码, 结果如表3-3所示。由于在此采用二进制对码字赋值, 故 在利用式 (3-9) 计算码字长度 $N_i$ 时, $D$ 取为 2 。以符号 $S_4$ 为例, 其出现概率为 0.07 , 按照式 (3-9) 计算得到它的码字长度应为 4 , 按式 (3-10) 计算得到它的累加概率 $A_4$ 为 0.78 , 将 0.78 转化为二 进制并取其前 4 位即得符号 $S_4$ 的码字为 1100 （省去了 “0.”, 有的 浮点数不能完全转化, 转化时只需完成前 $N_i$ 位即可)。

表3-3 香农-范诺编码

![image-20230419200402854](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20230419200402854.png)

除此之外， 还有二分法香农-范诺编码方法。其步骤如下： 
（1） 首先统计出每个符号出现的概率；
（2） 从左到右对上述概率从大到小排序；
（3） 从这个概率集合中的某个位置将其分为两个子集合，并尽量使两个子集合的概率和近似相等，给前面一个子集合赋值为0， 后面一个子集合赋值为1；
（4） 重复步骤3，直到各个子集合中只有一个元素为止；
（5） 将每个元素所属的子集合的值依次串起来，即可得到各个元素的香农-范诺编码。 

表3-4  二分法香农-范诺编码 

![image-20230419200434751](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20230419200434751.png)